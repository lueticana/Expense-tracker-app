services:
  uporabniki_storitev:
    build:
      context: ./services/1uporabniki-storitev
      dockerfile: ./config/Dockerfile
    container_name: uporabniki_storitev
    ports:
      - "5000:5000"
    environment:
      - SQLALCHEMY_DATABASE_URI=postgresql://postgres:123121@db_uporabniki:5432/uporabniki
    depends_on:
      - db_uporabniki

  skupine_storitev:
    build:
      context: ./services/2skupine-storitev
      dockerfile: ./config/Dockerfile
    container_name: skupine_storitev
    ports:
      - "5001:5001"
    environment:
      - SQLALCHEMY_DATABASE_URI=postgresql://postgres:123121@db_skupine:5432/skupine
    depends_on:
      - db_skupine

  stroski_storitev:
    build:
      context: ./services/3stroski-storitev
      dockerfile: ./config/Dockerfile
    container_name: stroski_storitev
    ports:
      - "5002:5002"
    environment:
      - SQLALCHEMY_DATABASE_URI=postgresql://postgres:123121@db_stroski:5432/stroski
    depends_on:
      - db_stroski

  analiza_storitev:
    build:
      context: ./services/4analiza-storitev
      dockerfile: ./config/Dockerfile
    container_name: analiza_storitev
    ports:
      - "5003:5003"
    environment:
      - SQLALCHEMY_DATABASE_URI=postgresql://postgres:123121@db_analiza:5432/analiza
    depends_on:
      - db_analiza

  db_uporabniki:
    image: postgres:17
    container_name: db_uporabniki
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: 123121
      POSTGRES_DB: uporabniki
    ports:
      - "5433:5432"

  db_skupine:
    image: postgres:17
    container_name: db_skupine
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: 123121
      POSTGRES_DB: skupine
    ports:
      - "5434:5432"

  db_stroski:
    image: postgres:17
    container_name: db_stroski
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: 123121
      POSTGRES_DB: stroski
    ports:
      - "5435:5432"

  db_analiza:
    image: postgres:17
    container_name: db_analiza
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: 123121
      POSTGRES_DB: analiza
    ports:
      - "5436:5432"
